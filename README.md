# task-tracker-llm
作業内容を切り替えながら時間を記録できるシンプルなデスクトップアプリ。作業終了後はカテゴリ別に作業時間を整理し、Markdown 形式で出力可能。

## 1. 目的
ユーザが行う作業をタスクとして登録し、ボタン操作のみで開始・停止・一時停止を行って作業時間を計測する。計測結果を Markdown 形式でコピーでき、さらに Google Gemini API によりカテゴリ／小項目へ自動分類しカテゴリ毎の総作業時間を集計する。

## 2. システム構成
- **開発言語**: Python 3.12 以降  
- **GUI ライブラリ**: **Tkinter** (標準ライブラリ)  
- **外部サービス**: Google Gemini Generative AI API (REST)  
- **データ保存**: ファイル保存は行わず、サマリーを Markdown 文字列としてコピーできれば良い。  

## 3. 操作フロー
1. 作業名を入力し **▶ 計測開始** ボタンを押す → セッション開始。  
2. 別の作業名を入力し再度 **▶** を押す → 直前セッションを自動停止し、次のセッション開始。  
3. **⏸ 一時停止** ボタンで現在セッションを一時停止／再開。  
4. **⏹ 停止** ボタンで全セッションを終了し、サマリー画面へ遷移。  
5. Gemini API に作業一覧を送信し、カテゴリ／小項目分類を取得。  
6. カテゴリ別総作業時間を計算し、Markdown 形式で整形 → クリップボードへコピー可能。  

## 4. 画面仕様
### 4.1 メイン画面
| UI 要素 | 仕様 |
| --- | --- |
| 作業名入力欄 | 1 行テキストボックス、日本語入力可 |
| **▶ 開始/切替ボタン** | 新規セッション開始／切替 |
| **⏸ 一時停止ボタン** | セッションを一時停止／再開 |
| **⏹ 停止ボタン** | 全セッション終了、サマリーへ |
| 作業一覧リスト | 時系列表示、進行中は太字＋▶/⏸ アイコン、経過時間 hh:mm:ss を 1 秒毎更新 |

### 4.2 サマリー画面
| UI 要素 | 仕様 |
| --- | --- |
| カテゴリ別集計テーブル | カテゴリ名、所属小項目、合計時間 |
| **Copy Markdown** ボタン | サマリー Markdown をクリップボードへコピー |
| 戻るボタン | メイン画面へ戻り、新規計測を開始 |

## 5. 機能要件
| 番号 | ID | 内容 |
| --- | --- | --- |
| 1 | FR-01 | ▶ 押下で新規セッション開始。既存セッションは自動停止・記録 |
| 2 | FR-02 | hh:mm:ss 形式でリアルタイム経過時間を表示（1 秒間隔） |
| 3 | FR-03 | ⏸ ボタンで一時停止／再開をトグル |
| 4 | FR-04 | ⏹ ボタンで全セッションを停止し、サマリー画面へ遷移 |
| 5 | FR-05 | Gemini API へ作業一覧を送信し、カテゴリ／小項目分類を取得 |
| 6 | FR-06 | カテゴリ別合計時間を算出しテーブル表示 |
| 7 | FR-07 | サマリーを Markdown 文字列へ整形し、クリップボードにコピー可能にする |
| 8 | FR-08 | 空入力時には ▶ ボタンを無効化、または警告ダイアログ表示 |
| 9 | FR-09 | API キーは環境変数や設定ファイルで安全に管理 |
|10 | FR-10 | 例外・API エラー時にはユーザへダイアログ表示しアプリがクラッシュしないようにする |

## 6. Copilot 開発タスクリスト
以下は「1 コミット／1 GitHub Copilot 提案」で実装・テストできる粒度のタスク。順番に進めることで動作確認しながら段階的に完成させられる。

| # | 開発タスク | 動作確認ポイント |
|---|---|---|
| 1 | Tkinter アプリのウィンドウ作成とメインループ実装 | ウィンドウが表示される |
| 2 | 作業名入力欄と **▶** ボタンを配置 | テキスト入力とクリックが可能 |
| 3 | セッション管理クラス (start/stop) を実装 | 1 タスクで時間が進む |
| 4 | 2 つ目のタスク開始時に前タスクを自動停止・記録するロジック | 2 連続タスクで切替が確認できる |
| 5 | **⏸ 一時停止／再開** ボタン実装 | パウズ中に時間が増えない |
| 6 | 作業一覧リスト (Listbox または Treeview) にタスクと経過時間をリアルタイム表示 | 秒単位で時間が更新される |
| 7 | **⏹ 停止** ボタンで全セッションを終了し、サマリービューに遷移 | タイマーが止まることを確認 |
| 8 | 記録済みセッションを Markdown 文字列へ整形 | 期待形式の文字列が得られる |
| 9 | クリップボードに Markdown をコピーするユーティリティ | 他アプリへ貼り付け可能 |
|10 | Gemini API 呼び出しスタブ (モック) を実装 | スタブが固定レスポンスを返す |
|11 | 実 API 呼び出しロジックへ差し替えし、分類結果を受信 | ターミナルでレスポンスが確認できる |
|12 | Gemini 結果を解析しカテゴリ別合計時間を計算 | 合計値が正しい |
|13 | サマリー画面にカテゴリ別集計テーブルを表示 | UI で確認できる |
|14 | 空入力時に ▶ を無効化 or 警告表示 | 空で押しても開始しない |
|15 | API エラー・例外時のダイアログ表示 | エラーをシミュレーションして確認 |
|16 | 日をまたぐセッションのタイムゾーンテスト追加 | 翌日でも時間が一致 |
|17 | 主要クラス・関数へタイプヒントと docstring 追加 | mypy / pydoc でチェック |

---

